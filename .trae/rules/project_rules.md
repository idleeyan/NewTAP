# 项目更新规则

## 版本号更新要求

**每次项目更新时，必须更新版本号。**

### 版本号位置
- `manifest.json` 中的 `version` 字段
- `manifest.json` 中的 `version_name` 字段（如存在）

### 版本号格式
- 版本号格式：`主版本号.次版本号.修订号`（如 `1.0.0`）
- 主版本号：重大功能变更或架构调整
- 次版本号：新增功能或较大改进
- 修订号：Bug修复或小改进

### 更新示例
- Bug修复：`1.0.0` → `1.0.1`
- 新增功能：`1.0.1` → `1.1.0`
- 重大更新：`1.1.0` → `2.0.0`

---

## 模块化开发规则

**核心原则：独立模块对应独立文件，防止单文件过大。**

### 文件大小限制

| 文件类型 | 建议上限 | 警告上限 | 必须拆分 |
|---------|---------|---------|---------|
| JavaScript (.js) | 500行 | 800行 | 1000行 |
| CSS (.css) | 300行 | 500行 | 800行 |
| HTML (.html) | 300行 | 500行 | 800行 |

### 模块拆分原则

1. **单一职责原则**
   - 每个文件只负责一个功能模块
   - 类/函数只做一件事

2. **按功能拆分**
   - UI组件按页面/功能拆分
   - 业务逻辑按领域拆分
   - 工具函数按用途拆分

3. **目录结构规范**
   ```
   js/
   ├── core/           # 核心模块（数据管理）
   ├── ui/             # UI模块（视图层）
   ├── utils/          # 工具函数
   └── services/       # 服务层（API、同步等）
   
   css/
   ├── base.css        # 基础样式、变量
   ├── components/     # 组件样式
   └── pages/          # 页面样式
   ```

4. **模块通信**
   - 通过事件系统通信
   - 避免循环依赖
   - 使用依赖注入

### 拆分时机

当文件达到以下条件时，应考虑拆分：
- 行数超过警告上限
- 包含多个不相关的功能
- 类/函数数量超过10个
- 修改时经常需要定位多个位置

### 命名规范

- 文件名：小写+连字符（如 `bookmark-ui.js`）
- 类名：大驼峰（如 `BookmarkUI`）
- 函数名：小驼峰（如 `renderBookmarks`）
- 常量：全大写+下划线（如 `MAX_ITEMS`）
