# 新标签页扩展 (New Tab Extension) - 强化升级计划

本文档旨在规划“新标签页”项目的后续开发方向，通过分阶段的迭代，将其打造成一个兼具美观、实用与高性能的个人仪表盘。

## 📅 项目现状概览

*   **核心功能**：书签管理（增删改查）、WebDAV 多端同步、访问统计。
*   **视觉风格**：深色极简风格，支持卡片形状/大小自定义，独特的罗盘时钟设计。
*   **交互体验**：自动收缩的“更多网站”抽屉，基础的右键菜单。

---

## 🚀 Phase 1: 视觉与个性化 (UI/UX Polish)

**目标**：提升第一眼的视觉冲击力，让用户能打造属于自己的标签页。

### 1.1 壁纸与主题系统
*   **[Feature] 自定义背景**：支持用户上传本地图片或使用在线 URL 作为背景图。
*   **[Feature] 每日壁纸**：集成 Unsplash 或 Bing 每日壁纸接口，每天自动更换高质感背景。
*   **[Effect] 毛玻璃特效**：为卡片和侧边栏增加 `backdrop-filter: blur()` 效果，提升现代感。

### 1.2 动画与微交互
*   **[Animation] 启动动画**：页面加载时，书签卡片依次浮现（Staggered Animation），消除加载的生硬感。
*   **[Interaction] 拖拽排序**：优化现有的拖拽体验，增加拖拽时的视觉反馈（占位符高亮、吸附效果）。
*   **[Feedback] 操作反馈**：添加/删除书签时增加细腻的过渡动画，而不是瞬间消失。

---

## 🔄 Phase 2: 数据同步与可靠性 (Data & Sync)

**目标**：确保数据绝对安全，多端同步零冲突。

### 2.1 WebDAV 同步优化
*   **[Logic] 冲突解决**：目前是简单的覆盖逻辑。需引入“最后修改时间”比对，或提供“本地/云端”二选一的冲突弹窗。
*   **[Performance] 增量同步**：仅上传/下载变更的部分，而不是全量 JSON 传输，节省流量并提高速度。

### 2.2 数据备份
*   **[Backup] 自动本地备份**：每天自动将配置导出为 JSON 存放在本地存储中，防止误删。
*   **[History] 版本控制**：保留最近 3 次的配置快照，支持一键回滚。

---

## 💻 Phase 3: 代码重构与性能 (Refactoring)

**目标**：降低维护成本，提升运行效率。

### 3.1 代码模块化
*   **[Refactor] 拆分 `newtab.js`**：目前的 `newtab.js` 承担了太多职责（UI、逻辑、数据、同步）。
    *   `BookmarkManager.js`: 纯粹的数据管理。
    *   `UIManager.js`: DOM 操作和事件绑定。
    *   `SyncManager.js`: WebDAV 和自动同步逻辑。
    *   `StatsManager.js`: 统计数据处理。

### 3.2 性能优化
*   **[Perf] 虚拟滚动**：如果“更多网站”中有几百个书签，渲染 DOM 会卡顿。引入虚拟列表技术，只渲染可视区域的卡片。
*   **[Cache] 图片懒加载**：图标和背景图启用 Lazy Loading。

---

## 📝 执行路线图建议

1.  **本周重点**：完成 **Phase 1.1 (壁纸)** 和 **Phase 3.1 (代码拆分)**。
    *   原因：壁纸能立竿见影提升颜值，代码拆分为后续功能扩展打地基。
2.  **下阶段**：**Phase 1.2 (拖拽优化)**。

---
*Generated by Claude Code for New Tab Project*
